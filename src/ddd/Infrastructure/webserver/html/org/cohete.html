<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Descubriendo el Desarrollo Web Asíncrono en PHP: Una Aventura
de Aprendizaje 🚀</title>
    <style>
        :root {
            --act1: #222226;
            --act2: #5d4d7a;
            --base: #b2b2b2;
            --base-dim: #686868;
            --bg1: #292b2e;
            --bg2: #212026;
            --bg3: #100a14;
            --bg4: #0a0814;
            --bg-alt: #42444a;
            --border: #5d4d7a;
            --cblk: #cbc1d5;
            --cblk-bg: #2f2b33;
            --cblk-ln: #827591;
            --cblk-ln-bg: #373040;
            --cursor: #e3dedd;
            --const: #a45bad;
            --comment: #2aa1ae;
            --comment-light: #2aa1ae;
            --comment-bg: #292e34;
            --comp: #c56ec3;
            --err: #e0211d;
            --func: #bc6ec5;
            --head1: #4f97d7;
            --head1-bg: #293239;
            --head2: #2d9574;
            --head2-bg: #293235;
            --head3: #67b11d;
            --head3-bg: #293235;
            --head4: #b1951d;
            --head4-bg: #32322c;
            --highlight: #444155;
            --highlight-dim: #3b314d;
            --keyword: #4f97d7;
            --lnum: #44505c;
            --mat: #86dc2f;
            --meta: #9f8766;
            --str: #2d9574;
            --suc: #86dc2f;
            --ttip: #9a9aba;
            --ttip-sl: #5e5079;
            --ttip-bg: #34323e;
            --type: #ce537a;
            --var: #7590db;
            --war: #dc752f;
            --aqua: #2d9574;
            --aqua-bg: #293235;
            --green: #67b11d;
            --green-bg: #293235;
            --green-bg-s: #29422d;
            --cyan: #28def0;
            --red: #f2241f;
            --red-bg: #3c2a2c;
            --red-bg-s: #512e31;
            --blue: #4f97d7;
            --blue-bg: #293239;
            --blue-bg-s: #2d4252;
            --magenta: #a31db1;
            --yellow: #b1951d;
            --yellow-bg: #32322c;
        }

        html {
            font-size: 16px;
            box-sizing: border-box;
        }

        *, *:before, *:after {
            box-sizing: inherit;
        }

        body {
            background-color: var(--bg1);
            color: var(--base);
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            font-size: 1rem;
            padding: 60px 0 0;
        }

        h1, h2, h3, h4, h5, h6 {
            color: var(--head1);
            font-weight: bold;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            line-height: 1.2;
        }

        h1 {
            font-size: 1.8rem;
            background-color: var(--head1-bg);
            padding: 0.625rem;
            border-radius: 0.3125rem;
        }

        h2 {
            font-size: 1.6rem;
            color: var(--head2);
            background-color: var(--head2-bg);
            padding: 0.5rem;
            border-radius: 0.25rem;
        }

        h3 {
            font-size: 1.4rem;
            color: var(--head3);
            background-color: var(--head3-bg);
            padding: 0.375rem;
            border-radius: 0.1875rem;
        }

        h4 {
            font-size: 1.2rem;
            color: var(--head4);
            background-color: var(--head4-bg);
            padding: 0.25rem;
            border-radius: 0.125rem;
        }

        a {
            color: var(--blue);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        p {
            margin-bottom: 1rem;
        }

        ul, ol {
            margin-bottom: 1rem;
            padding-left: 1.25rem;
        }

        li {
            margin-bottom: 0.3125rem;
        }

        code {
            color: var(--type);
            padding: 0.125rem 0.25rem;
            border-radius: 0.1875rem;
            font-size: 0.875rem;
            font-family: 'Courier New', Courier, monospace;
        }

        blockquote {
            border-left: 0.25rem solid var(--green);
            margin-left: 0;
            padding-left: 0.625rem;
            color: var(--comment);
            font-style: italic;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1.25rem;
            overflow-x: auto;
            display: block;
        }

        th, td {
            padding: 0.5rem;
            border: 1px solid var(--border);
            min-width: 100px;
        }

        th {
            background-color: var(--bg2);
            color: var(--base);
            font-weight: bold;
        }

        img {
            max-width: 100%;
            height: auto;
            margin-bottom: 1rem;
        }

        .site-header a {
            color: var(--blue);
            text-decoration: none;
            font-size: 1rem;
            font-weight: bold;
        }

        .main-container {
            display: flex;
            flex-direction: column;
            max-width: 100%;
            margin: 1rem auto 0;
            padding: 0 0.5rem;
        }

        .table-of-contents {
            background-color: var(--bg3);
            padding: 0.9375rem;
            border-radius: 0.3125rem;
            margin-bottom: 1rem;
            width: 100%;
        }

        .table-of-contents h2 {
            margin-top: 0;
            font-size: 1.5rem;
        }

        .table-of-contents ul {
            list-style-type: none;
            padding-left: 1.25rem;
        }

        .table-of-contents li {
            margin-bottom: 0.3125rem;
        }

        .table-of-contents a {
            color: var(--blue);
            text-decoration: none;
            font-size: 0.9375rem;
        }

        .table-of-contents a:hover {
            text-decoration: underline;
        }

        .content {
            background-color: var(--bg2);
            padding: 0.625rem;
            border-radius: 0.5rem;
        }

        pre {
            border-radius: 0.3125rem;
            overflow-x: auto;
            color: var(--cblk);
            padding: 0.625rem;
            font-size: 0.875rem;
            background-color: var(--bg3);
            white-space: pre;
            word-wrap: normal;
        }

        pre code {
            display: block;
            overflow-x: auto;
            padding: 1em;
            background: none;
            white-space: pre;
            word-wrap: normal;
        }


        .sourceCode .kw {
            color: var(--keyword);
        }

        .sourceCode .dt {
            color: var(--type);
        }

        .sourceCode .dv, .sourceCode .bn, .sourceCode .fl {
            color: var(--const);
        }

        .sourceCode .ch, .sourceCode .st {
            color: var(--str);
        }

        .sourceCode .co, .sourceCode .do, .sourceCode .an, .sourceCode .cv, .sourceCode .in {
            color: var(--comment);
            font-style: italic;
        }

        .sourceCode .ot, .sourceCode .fu, .sourceCode .ex {
            color: var(--func);
        }

        .sourceCode .al, .sourceCode .er {
            color: var(--err);
        }

        .sourceCode .va {
            color: var(--var);
        }

        .sourceCode .cf {
            color: var(--keyword);
        }

        .sourceCode .op, .sourceCode .bu {
            color: var(--base);
        }

        .sourceCode .pp {
            color: var(--meta);
        }

        .sourceCode .at {
            color: var(--var);
        }

        theme-toggler {
            position: fixed;
            bottom: 1rem;
            right: 1rem;
            z-index: 2;
        }

        @media (min-width: 48em) {
            html {
                font-size: 18px;
            }

            body {
                padding: 60px 0 0;
            }

            .main-container {
                flex-direction: row;
                justify-content: flex-start;
                align-items: flex-start;
            }

            .table-of-contents {
                position: sticky;
                top: 70px;
                height: calc(100vh - 70px);
                overflow-y: auto;
                width: 15.625rem;
                margin-right: 1.25rem;
                flex-shrink: 0;
            }

            .content {
                flex-grow: 1;
                overflow-y: auto;
                padding: 1.25rem;
            }
        }
    </style>
    <script type="module" src="../../html/js/atomic/organism/ThemeToogler.js"></script>
    <script type="module" src="../../html/js/atomic/molecule/PortfolioHeader.js"></script>
</head>
<body>
<portfolio-header></portfolio-header>
<theme-toggler></theme-toggler>
<div class="main-container">
        <nav class="table-of-contents">
        <h2>Tabla de Contenidos</h2>
        <ul>
        <li><a href="#el-comienzo-de-la-aventura"
        id="toc-el-comienzo-de-la-aventura">El Comienzo de la
        Aventura</a></li>
        <li><a href="#descubriendo-rxphp-y-la-programación-reactiva"
        id="toc-descubriendo-rxphp-y-la-programación-reactiva">Descubriendo
        RxPHP y la Programación Reactiva</a></li>
        <li><a href="#creando-una-solución"
        id="toc-creando-una-solución">Creando una Solución</a></li>
        <li><a href="#un-vistazo-al-código"
        id="toc-un-vistazo-al-código">Un Vistazo al Código</a></li>
        <li><a href="#te-apetece-probarlo"
        id="toc-te-apetece-probarlo">Te apetece probarlo?</a></li>
        </ul>
    </nav>
    
    <div class="content">
        <header>
            <h1>Descubriendo el Desarrollo Web Asíncrono en PHP: Una
Aventura de Aprendizaje 🚀</h1>
            
        </header>

        <h1 id="el-comienzo-de-la-aventura">El Comienzo de la
        Aventura</h1>
        <p>Como desarrollador PHP, siempre estoy buscando o aprendiendo
        cosas que me parecen interesantes. A lo largo de mi carrera, a
        menudo me he sentido frustrado por la complejidad innecesaria de
        muchos frameworks, deseando encontrar una manera de enfocarme en
        resolver problemas reales, en lugar de luchar contra las
        herramientas.</p>
        <p>Mi curiosidad se avivó aún más con la reciente actualización
        del framework Symfony, que introdujo la posibilidad de cambiar
        los "runtimes", permitiendo opciones como la ejecución
        asíncrona. Esto me impulsó a investigar más a fondo.</p>
        <h1
        id="descubriendo-rxphp-y-la-programación-reactiva">Descubriendo
        RxPHP y la Programación Reactiva</h1>
        <p>En un momento de mi carrera me vi metido en el desarrollo de
        un front , para el cual el gran Guillermo Cuenca me introdujo en
        el mundo de la programación reactiva con JS y descubrí su
        potencial. Tras pasar un tiempo me topé con los videos de <a
        href="https://www.youtube.com/watch?v=mJFbYHYxSDg">Sergey
        Zhuk</a> sobre RxPHP y la programación reactiva. Estos conceptos
        me fascinaron y comencé a explorar más a fondo. Recursos como <a
        href="https://rxmarbles.com/">RxMarbles</a> y <a
        href="https://reactivex.io/learnrx/">LearnRx</a> me ayudaron a
        comprender mejor los principios de la programación reactiva y
        cómo podría aplicarlos en PHP. Sería posible aplicar estos
        conceptos en PHP? Me pregunté.</p>
        <p>Vi el potencial de crear aplicaciones web altamente
        eficientes y receptivas aprovechando la naturaleza asíncrona de
        PHP. Sin embargo, noté que no había muchas opciones para
        comenzar fácilmente con estas tecnologías en PHP sin tener que
        configurar todo desde cero.</p>
        <h1 id="creando-una-solución">Creando una Solución</h1>
        <p>Inspirado por este desafío, decidí crear <a
        href="https://github.com/pascualmg/cohete">un microframework</a>
        que combinara la programación asíncrona con el Diseño Guiado por
        el Dominio para Desarrolladores (DDDD). Aunque esta última parte
        , es meramente organizativa y nada tiene que ver con el core ,
        que está totalmente separado.</p>
        <p>Mi objetivo era proporcionar una manera fácil para que los
        programadores de backend en PHP pudieran comenzar a utilizar
        estas tecnologías sin tener que preocuparse por la configuración
        inicial.</p>
        <p>Una de las grandes ventajas de este microframework es que el
        código del núcleo es super sencillo. Esto te da un control casi
        total sobre el código de tu framework y facilita su comprensión
        y extensión.</p>
        <p>Además, es poco opinionado y se puede ampliar fácilmente
        según tus necesidades. Incluso puedes construir tu propio kernel
        desde cero si lo deseas fácilmente.</p>
        <h1 id="un-vistazo-al-código">Un Vistazo al Código</h1>
        <p>Veamos un ejemplo práctico. Imaginemos que queremos crear un
        endpoint para publicar un nuevo post en un blog.</p>
        <p>Primero, definimos la ruta en nuestro archivo de
        configuración:</p>
        <div class="sourceCode" id="cb1"><pre
        class="sourceCode json"><code class="sourceCode json"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ot">[</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">{</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;method&quot;</span><span class="fu">:</span> <span class="st">&quot;POST&quot;</span><span class="fu">,</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;path&quot;</span><span class="fu">:</span> <span class="st">&quot;/post&quot;</span><span class="fu">,</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;handler&quot;</span><span class="fu">:</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">CreatePostController&quot;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="ot">]</span></span></code></pre></div>
        <p>Luego, implementamos el <code
        class="verbatim">CreatePostController</code>:</p>
        <div class="sourceCode" id="cb2"><pre
        class="sourceCode php"><code class="sourceCode php"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> <span class="cn">C</span>reatePostController <span class="kw">implements</span> <span class="cn">H</span>ttpRequestHandler</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="kw">function</span> <span class="bu">__invoke</span>(<span class="cn">S</span>erverRequestInterface <span class="va">$request</span>)<span class="ot">:</span> <span class="cn">P</span>romiseInterface</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">$payload</span> <span class="op">=</span> <span class="fu">json_decode</span>(<span class="va">$request</span>-&gt;getBody()-&gt;getContents()<span class="ot">,</span> <span class="kw">true</span>)<span class="ot">;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">$post</span> <span class="op">=</span> <span class="kw">new</span> <span class="cn">P</span>ost(</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>            <span class="cn">U</span>uid::from(<span class="va">$payload</span>[<span class="st">&#39;id&#39;</span>])<span class="ot">,</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>            <span class="va">$payload</span>[<span class="st">&#39;title&#39;</span>]<span class="ot">,</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>            <span class="va">$payload</span>[<span class="st">&#39;content&#39;</span>]</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        )<span class="ot">;</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">$this</span>-&gt;postRepository-&gt;save(<span class="va">$post</span>)-&gt;then(</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>            <span class="kw">fn</span>() =&gt; <span class="cn">J</span>sonResponse::created()<span class="ot">,</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>            <span class="kw">fn</span>(<span class="bu">Exception</span> <span class="va">$e</span>) =&gt; <span class="cn">J</span>sonResponse::withError(<span class="va">$e</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>        )<span class="ot">;</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
        <p>Aquí es donde brilla la magia de ReactPHP. El método <code
        class="verbatim">save</code> del repositorio devuelve una <code
        class="verbatim">Promise</code>. Si el post se guarda con éxito,
        la promesa se resuelve, y si algo sale mal, se rechaza.</p>
        <p>Lo fascinante es que, mientras se resuelve la promesa, el
        servidor puede continuar procesando otras solicitudes de manera
        concurrente. De hecho, en pruebas en producción, este
        microframework ha podido manejar fácilmente registros de 40k
        mientras atiende otras peticiones simultáneamente. Este es el
        poder de la programación asíncrona en acción.</p>
        <h1 id="te-apetece-probarlo">Te apetece probarlo?</h1>
        <p>Animo a todos los backend de PHP a probar esta nueva
        tecnología y experimentar los beneficios de la programación
        asíncrona.</p>
        <p>Puedes explorar el código fuente en <a
        href="https://github.com/pascualmg/cohete">GitHub</a> y conocer
        más sobre mi trabajo en [[<a
        href="https://pascualmg.dev/html/pascualmgPorfolio.html">https://pascualmg.dev/html/pascualmgPorfolio.html</a>]
        , servidor donde se ha puesto en producción este framework para
        pruebas reales y donde estoy creando un pequeño Portfolio además
        de ser también mi laboratorio de pruebas :)</p>
        <p>#PHP #AsyncPHP #Microframework #DDD #DesarrolloWeb
        #OpenSource #ReactPHP #RxPHP #ReactiveProgramming</p>

        <footer>
            
            
        </footer>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const homeLink = document.getElementById('home-link');
        const currentDomain = window.location.hostname;
        if (currentDomain === 'localhost' || currentDomain === '127.0.0.1') {
            homeLink.href = '/';
        } else {
            homeLink.href = 'https://' + currentDomain;
        }
    });

    window.addEventListener('WebComponentsReady', function () {
        const themeToggler = document.querySelector('theme-toggler');
        if (themeToggler) {
            console.log('ThemeToggler cargado y listo para usar');
        }
    });
</script>
</body>
</html>